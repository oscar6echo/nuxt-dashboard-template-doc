(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{226:function(t,e,a){"use strict";a.r(e);var r=a(0),n=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[t._v("#")]),t._v(" State")]),t._v(" "),a("p",[t._v("The files managing the dashboard or state are:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/js/generic/app-state.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("js/generic/app-state.js"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("The user component using function "),a("code",[t._v("updateStateInUrl()")]),t._v(" i.e.:\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/components/tab-bitcoin.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("tab-bitcoin.vue"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/components/tab-map.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("tab-map.vue"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[t._v("The user component using function "),a("code",[t._v("getStateFromUrl()")]),t._v(" i.e.:\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/components/tab-bitcoin-plot.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("tab-bitcoin-plot.vue"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/components/tab-bitcoin.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("tab-bitcoin.vue"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/components/tab-map.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("tab-map.vue"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/components/tab-map-globe.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("tab-map-globe.vue"),a("OutboundLink")],1)])])])]),t._v(" "),a("h2",{attrs:{id:"url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url"}},[t._v("#")]),t._v(" Url")]),t._v(" "),a("p",[t._v("The mechanism used by the dashboard to save app state is to use the "),a("span",{staticStyle:{color:"red"}},[t._v(" url as the source of truth ")]),t._v(".")]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/URL/pathname",target:"_blank",rel:"noopener noreferrer"}},[t._v("path"),a("OutboundLink")],1),t._v(" contains the current tab/sub-tab e.g.:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("/countries/plot")])]),t._v(" "),a("li",[a("code",[t._v("/slider2d")])]),t._v(" "),a("li",[a("code",[t._v("/weather")])]),t._v(" "),a("li",[a("code",[t._v("/wikitabe/modern")])])]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Query_string",target:"_blank",rel:"noopener noreferrer"}},[t._v("query string"),a("OutboundLink")],1),t._v(" contains the state pushed by user components flattened to fit into the url query string shape: "),a("code",[t._v("/my/current/path?param1=value1&param2=value2&param3=value3")])]),t._v(" "),a("p",[t._v("For example the following app state, while on the "),a("code",[t._v("countries/plot")]),t._v(" sub-tab")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"globe"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"selectedCountry"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Argentina"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tripTimeSec"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"bitcoin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fieldSelected"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"size"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("translates to the following url:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("http://localhost:3000/countries/plot?globe.selectedCountry=Argentina&globe.tripTimeSec=3&bitcoin.fieldSelected=size\n")])])]),a("p",[t._v("Note that the query string contains the state of the "),a("em",[t._v("entire")]),t._v(" app, not just the current tab."),a("br"),t._v("\nIndeed the query string is propagated across tab/sub-tab with function "),a("code",[t._v("buildLinkn()")]),t._v(" in "),a("a",{attrs:{href:"https://github.com/oscar6echo/nuxt-dashboard-template/blob/master/js/generic/app-state.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("js/generic/app-state.js"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"actions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#actions"}},[t._v("#")]),t._v(" Actions")]),t._v(" "),a("p",[t._v("The app state derives from user actions (inputs, selections, etc).")]),t._v(" "),a("p",[t._v("In order for a param to be part of the state the following must be implemented:")]),t._v(" "),a("ul",[a("li",[t._v("The user action triggers an update to the query string\n"),a("ul",[a("li",[t._v("Use function "),a("code",[t._v("updateStateInUrl()")]),t._v(" with the relevant params")])])]),t._v(" "),a("li",[t._v("The display component must retrieve its params from the state embedded in the url\n"),a("ul",[a("li",[t._v("Use function "),a("code",[t._v("getStateFromUrl()")])])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);